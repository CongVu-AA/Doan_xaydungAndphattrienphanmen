<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <div th:fragment="content">
        <!-------gio hang-------------->
        <section class="cart">
            <div class="container">
                <div class="cart-content">
                    <div class="cart-content-tables">
                        <!-- Bảng bên trái -->
                        <div class="cart-content-left">
                            <form action="">
                                <table>
                                    <thead>
                                        <tr>
                                            <th colspan="4" class="title">
                                                <h2><b>Giỏ hàng của bạn</b></h2>
                                            </th>
                                        </tr>
                                        <tr class="title2">
                                            <th>Sản Phẩm</th>
                                            <th>Số Lượng</th>
                                            <th>Giá</th>
                                            <th>Chọn</th>
                                        </tr>
                                    </thead>
                                    <tbody class="danhmuc" >
                                        <!-- Lặp qua từng giỏ hàng -->
                                    <th:block th:each="cart : ${carts}">
                                        <!-- lăo qua từng chi tiết giỏ hàng -->
                                        <tr class="product_rows" th:each="detail : ${cart.cartDetail}">
                                            <td>
                                                <img th:src="@{'/images/' + ${detail.sanPham.hinhAnh}}" th:alt="${detail.sanPham.tenSanPham}" />
                                                <span th:text="${detail.sanPham.tenSanPham}">Táo Mỹ</span>
                                            </td>
                                            <td>
                                                <input
                                                    type="number"
                                                    th:value="${detail.soLuong}"
                                                    min="0"
                                                    th:attr="data-detail-id=${detail.id}, data-price=${detail.sanPham.gia}"
                                                />
                                            </td>
                                            <td>
                                                <p><span class="price" th:attr="data-price-id=${detail.id}" th:text="${#numbers.formatInteger(detail.sanPham.gia * detail.soLuong ,1,'COMMA')}">120000</span><sup>đ</sup></p>
                                            </td>
                                            <td>
                                                <a href="#" class="btn btn-danger btn-delete" th:attr ="data-id=${detail.id}">
                                                    <i class="fas fa-trash-alt"></i>
                                                </a>
                                            </td>
                                        </tr>
                                    </th:block>
                                    </tbody>
                                </table>
                            </form>
                            <div class="continue-shopping">
                                <a href="/menu" class="btn btn-primary">← Tiếp tục mua hàng</a>
                            </div>
                        </div>

                        <!-- Bảng bên phải -->
                        <div class="cart-content-right">
                            <table>
                                <tr class="dd1">
                                    <th colspan="2"><h2><b>THÔNG TIN ĐƠN HÀNG</b></h2></th>
                                </tr>
                                <div class="dd2">
                                    <tr>
                                        <td>Tổng Sản Phẩm:</td>
                                        <td id="total-products">0</td>
                                    </tr>
                                    <tr class="dd5">
                                        <td>Tạm tính :</td>
                                        <td id="subtotal">0đ</td>
                                    </tr>
                                </div>
                                <tr>
                                    <td colspan="2">
                                        <div class="cart-content-right-text">
                                            <p>
                                                Bạn sẽ được miễn phí vận chuyển nếu đơn hàng của bạn trị
                                                giá từ 10.000.000đ trở lên
                                            </p>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <div class="cart-content-right-text-button">
                                            <input
                                                type="button"
                                                name="btnhome"
                                                value="HOME"
                                                onclick="Trangchu()"
                                            />
                                            <input
                                                type="submit"
                                                name="btnpay"
                                                value="THANH TOÁN"
                                                onclick="diachi()"
                                            />
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Script -->
        <script>
            function Trangchu() {
                window.location.href = "/home";
            }
            function diachi() {
                window.location.href = "/location";
            }
        </script>
        <script th:src="@{/js/user/cart.js}"></script>
    </div>
</body>
</html>